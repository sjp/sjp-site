#!/usr/bin/env ruby

preprocess do
  # items may be unpublished by adding attribute publish: false
  items.delete_if { |item| item[:publish] == false }
end

#compile '/samples/three/' do
#  layout '/shiny/'
#end

compile '*' do
  filter :erb
  layout 'default' unless item[:layout] == "none"
end

route '/sitemap/' do
    '/sitemap.xml'
end

route '/robots/' do
  '/robots.txt'
end

route 'fonts/*' do
  item.identifier.chop
end

route '/images/*' do
  item.identifier.chop + item[:extension]
end

route '/scripts/*' do
  item.identifier.chop + '.js'
end

route '/styles/*' do
  item.identifier.chop + '.css'
end

route '*' do
  item.identifier + 'index.html'
end

layout '*', :erb
