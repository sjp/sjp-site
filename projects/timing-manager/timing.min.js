var TimingManager=function(f,b){_.isArray(f)||(f=[f]);b=b||"ms";if(!_.isString(b)||!_.contains(["ms","s","m"],b))throw Error("Invalid 'timeUnit': Must be one of 'ms', 's', 'm'");var e={},g=function(a){if("ms"===b)return a;if("s"===b)return 1E3*a;if("m"===b)return 6E4*a;throw Error("Invalid 'timeUnit': "+b);};this.register=function(a,c){for(var b in a)if(!e[b]||c)e[b]=a[b]};var j=function(){if(_.isEmpty(e))throw Error("No actions assigned to animations, see 'register()'");};this.play=function(a){j();
a=a||0;_.each(f,function(c){e[c.label]?_.delay(e[c.label],a+g(c.start),c):console.warn("Ignoring playback of animation: "+c.label)})};this.frameTiming=function(a){a=a||0;return _.filter(f,function(c){return a>=g(c.start)&&a<g(c.start+c.durn)})};this.frameApply=function(a,c){j();c=g(c||0);a=a||10;if(0>=a)throw Error("Frames per second must be > 0");var b=1E3/a,h=0;_.each(f,function(a){h=Math.max(h,g(a.start+a.durn))});var k=[],d;for(d=0;d*b<h;d++)k.push(c+d*b);var m=function(a){return function(b){e[b.label]?
_.delay(e[b.label],a,b):console.warn("Ignoring playback of animation: "+b.label)}};for(d=c;d<_.last(k);d+=b){var l=this.frameTiming(d);l&&_.each(l,m(d))}}};